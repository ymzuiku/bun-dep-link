{
  "version": 3,
  "sources": ["../lib/index.ts"],
  "sourcesContent": [
    "#!/usr/bin/env bun\n\nimport * as fs from \"node:fs/promises\";\nimport { $ } from \"bun\";\nimport path from \"node:path\";\n\nconst p = (...args: string[]) => path.resolve(process.cwd(), ...args);\n\nasync function start() {\n\tconst pkgString = (await fs.readFile(p(\"package.json\"), \"utf8\")).toString();\n\n\tconst pkg = JSON.parse(pkgString);\n\tconst githubDependencies = pkg.githubDependencies || {};\n\tconst awayGithubDependencies = (\n\t\tprocess.env.AWAY_GITHUB_DEPENDENCIES || \"\"\n\t).split(\",\");\n\n\tlet isGithub = false;\n\tlet isLink = false;\n\n\t// 获取参数\n\tconst args = process.argv.slice(2);\n\tif (args.includes(\"--github\")) {\n\t\tisGithub = true;\n\t}\n\tif (args.includes(\"--link\")) {\n\t\tisLink = true;\n\t}\n\n\tlet changed = false;\n\n\t[\"dependencies\", \"devDependencies\"].forEach((depsKey) => {\n\t\tconst deps = pkg[depsKey];\n\t\tObject.keys(deps).forEach((key) => {\n\t\t\tif (!githubDependencies[key]) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (isGithub && deps[key] !== githubDependencies[key]) {\n\t\t\t\tchanged = true;\n\t\t\t\tdeps[key] = githubDependencies[key];\n\t\t\t}\n\t\t\tif (isLink && deps[key] !== `link:${key}`) {\n\t\t\t\tchanged = true;\n\t\t\t\tdeps[key] = `link:${key}`;\n\t\t\t}\n\t\t\tif (\n\t\t\t\tawayGithubDependencies.includes(key) &&\n\t\t\t\tdeps[key] !== githubDependencies[key]\n\t\t\t) {\n\t\t\t\tchanged = true;\n\t\t\t\tdeps[key] = githubDependencies[key];\n\t\t\t}\n\t\t});\n\t\tpkg[depsKey] = deps;\n\t});\n\n\tif (!changed) {\n\t\tconsole.log(\"Nothing changed\");\n\t\tprocess.exit(0);\n\t}\n\n\tawait fs.writeFile(p(\"package.json\"), JSON.stringify(pkg, null, 2));\n\tif (changed) {\n\t\tawait $`bun install`;\n\t}\n}\n\nstart();\n"
  ],
  "mappings": ";;;;AA/////fAEA;AACA;AACA;AAIA,eAAe,KAAK,GAAG;AACtB,QAAM,aAAa,MAAS,YAAS,EAAE,cAAc,GAAG,MAAM,GAAG,SAAS;AAE1E,QAAM,MAAM,KAAK,MAAM,SAAS;AAChC,QAAM,qBAAqB,IAAI,sBAAsB,CAAC;AACtD,QAAM,0BACL,QAAQ,IAAI,4BAA4B,IACvC,MAAM,GAAG;AAEX,MAAI,WAAW;AACf,MAAI,SAAS;AAGb,QAAM,OAAO,QAAQ,KAAK,MAAM,CAAC;AACjC,MAAI,KAAK,SAAS,UAAU,GAAG;AAC9B,eAAW;AAAA,EACZ;AACA,MAAI,KAAK,SAAS,QAAQ,GAAG;AAC5B,aAAS;AAAA,EACV;AAEA,MAAI,UAAU;AAEd,GAAC,gBAAgB,iBAAiB,EAAE,QAAQ,CAAC,YAAY;AACxD,UAAM,OAAO,IAAI;AACjB,WAAO,KAAK,IAAI,EAAE,QAAQ,CAAC,QAAQ;AAClC,WAAK,mBAAmB,MAAM;AAC7B;AAAA,MACD;AACA,UAAI,YAAY,KAAK,SAAS,mBAAmB,MAAM;AACtD,kBAAU;AACV,aAAK,OAAO,mBAAmB;AAAA,MAChC;AACA,UAAI,UAAU,KAAK,SAAS,QAAQ,OAAO;AAC1C,kBAAU;AACV,aAAK,OAAO,QAAQ;AAAA,MACrB;AACA,UACC,uBAAuB,SAAS,GAAG,KACnC,KAAK,SAAS,mBAAmB,MAChC;AACD,kBAAU;AACV,aAAK,OAAO,mBAAmB;AAAA,MAChC;AAAA,KACA;AACD,QAAI,WAAW;AAAA,GACf;AAED,OAAK,SAAS;AACb,YAAQ,IAAI,iBAAiB;AAC7B,YAAQ,KAAK,CAAC;AAAA,EACf;AAEA,QAAS,aAAU,EAAE,cAAc,GAAG,KAAK,UAAU,KAAK,MAAM,CAAC,CAAC;AAClE,MAAI,SAAS;AACZ,UAAM;AAAA,EACP;AAAA;AA1DD,IAAM,IAAI,IAAI,SAAmB,KAAK,QAAQ,QAAQ,IAAI,GAAG,GAAG,IAAI;AA6DpE,MAAM;",
  "debugId": "02BF7D928F88A13B64756e2164756e21",
  "names": []
}